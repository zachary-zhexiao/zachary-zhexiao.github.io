<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vision Gallery - Zachary</title>
    <link rel="stylesheet" href="styles.css">

</head>

<body>
    <main>
        <div id="left" class="left">
            <div class="photo-wall">
                <img src="vertical/IMG_20230508_183828.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230512_001826.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230512_001915.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230512_121413.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230512_122453.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230520_212522.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230603_000822.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230603_011201.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230603_113235.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230603_113352.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230603_113602.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230603_120300.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230607_011525.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230610_103914.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230614_202529.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230623_211453.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230623_212405.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230624_151029.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230624_151108.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230624_151207.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230624_151629.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230701_213857.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230701_222547.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230708_134754.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230708_135121.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230727_181744.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230729_084043.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230729_084158.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230729_084632.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230729_084710.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230809_013521.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230813_203223.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230825_002221.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230826_002933.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20230827_221152.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20231002_224514.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20231002_224704.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20231002_224851.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20231002_224939.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20231102_012504.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20231102_012527.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20231102_012725.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240719_092934.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240719_093038.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240731_003845.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240731_011435.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240801_183104.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240801_183242.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240804_133248.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240817_032559.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240817_032803.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240817_032946.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240817_033042.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240817_033517.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240915_234627.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240918_014711.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240925_235130.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240925_235315.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240930_221717.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240930_221845.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20240930_223456.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/IMG_20241204_194359.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/MEITU_20241103_003658732.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/MEITU_20241103_003900343.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/MTXX_MH20240324_234306614.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/MTXX_MH20240324_235056522.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/MTXX_MH20240324_235826975.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="vertical/MTXX_MH20240324_235914899.jpg" alt="Photo" class="hidden" loading="lazy">

            </div>

        </div>
        <div id="right" class="right">
            <div class="photo-wall">
                <img src="horizontal/IMG_20230512_002006.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230512_122342.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230603_115139.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230612_225818.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230613_224014.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230615_204028.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230623_214453.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230624_150937.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230701_224715.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230727_181725.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230819_172551.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230824_235733.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230825_000028.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20230924_142921.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240709_215024.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240731_005436.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240731_011821.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240817_031711.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240817_031816.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240817_033141.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240817_033343.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240913_202404.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240915_015216.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240925_235546.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240925_235603.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240925_235619.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240925_235830.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240926_000004.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240926_000301.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/IMG_20240927_223829.jpg" alt="Photo" class="hidden" loading="lazy">
                <img src="horizontal/MTXX_MH20230930_004608883.jpg" alt="Photo" class="hidden" loading="lazy">

            </div>
        </div>
    </main>

    <footer>
        <div id="clustrmaps-widget" style="width: 250px;">
            <script type="text/javascript" id="clustrmaps"
                src="//clustrmaps.com/map_v2.js?d=CMwXJBBU2WkQLKD1_vQE3Nj5l4j_H3_Zfdl949YGwXE&cl=ffffff&w=a"></script>
        </div>
    </footer>
    <p style="text-align: center;">&copy; 2025 Zachary-Zhe Xiao. All rights reserved.</p>

    <script>
        function balanceImages() {
            const left = document.getElementById('left').querySelector('.photo-wall');
            const right = document.getElementById('right').querySelector('.photo-wall');
            let leftImages = Array.from(left.querySelectorAll('img'));
            let rightImages = Array.from(right.querySelectorAll('img'));

            const columnLeft = 1; // Number of columns on the left
            const columnRight = 1; // Number of columns on the right
            const left_portion = 0.4;
            const right_portion = 0.6;
            const screenWidth = window.innerWidth;

            function getAverageHeight(images) {
                if (images.length === 0) return 0;
                const totalHeight = images.reduce((total, img) => total + img.clientHeight, 0);
                return totalHeight / images.length;
            }
            function getAverageWidth(images) {
                if (images.length === 0) return 0;
                const totalWidth = images.reduce((total, img) => total + img.clientWidth, 0);
                return totalWidth / images.length;
            }
            const avgLeftHeight = getAverageHeight(leftImages) / columnLeft;
            const avgRightHeight = getAverageHeight(rightImages) / columnRight;
            console.log("avgLeftHeight, avgRightHeight", avgLeftHeight, avgRightHeight);
            console.log("screenWidth", screenWidth);
            const leftHeight = avgLeftHeight * Math.ceil(leftImages.length);
            const rightHeight = avgRightHeight * Math.ceil(rightImages.length);
            console.log("leftHeight, rightHeight", leftHeight, rightHeight);
            let heightDifference = leftHeight - rightHeight;
            const avgHeight = (avgLeftHeight + avgRightHeight) / 2;
            if (Math.abs(heightDifference) > 100) {
                factor = 1.3;
                num_move = Math.floor(Math.abs(heightDifference) / (avgLeftHeight + avgLeftHeight * columnLeft / columnRight) / factor);
                console.log("num_move", num_move);
                for (let i = 0; i < num_move; i++) {
                    if (heightDifference > 0) {
                        const img = leftImages.pop();
                        right.appendChild(img);
                    } else {
                        const img = rightImages.pop();
                        left.appendChild(img);
                    }
                }
            }
        }

        function checkMediaQuery() {

            const images = document.querySelectorAll('img');
            let loadedImages = 0;

            images.forEach(img => {
                img.onload = () => {
                    loadedImages++;
                    if ((window.matchMedia("(max-width: 768px)").matches && loadedImages === images.length)) {
                        balanceImages();
                    }
                };
                // For cached images
                if (img.complete) {
                    img.classList.remove('hidden');
                    img.onload();
                }
            });

        }

        window.onload = checkMediaQuery;
        window.onresize = checkMediaQuery;
    </script>
</body>

</html>
</div>